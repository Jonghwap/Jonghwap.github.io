{% assign items = include.talks | default: site.talks %}
{% if items and items.size > 0 %}
{% assign has_order = items | where_exp: "t", "t.order" %}
{% if has_order and has_order.size == items.size %}
{% comment %}Respect manual ordering when every item provides an order field (higher numbers appear first).{% endcomment %}
{% assign sorted = items | sort: "order" | reverse %}
{% else %}
{% comment %}Fallback ordering: sort by conference name, then date (newest first).{% endcomment %}
{% assign sorted_by_conference = items | sort: "conference" %}
{% assign sorted = sorted_by_conference | sort: "date" | reverse %}
{% endif %}
<ul class="talk-list">
  {% for talk in sorted %}
  <li class="talk-entry">
    <span class="talk-bullet">#</span>
    <div class="talk-details">
      <div class="talk-primary"><strong>{{ talk.conference }}</strong>, {{ talk.date }}</div>
      <div class="talk-secondary">{{ talk.location }}, {{ talk.country }}</div>
    </div>
  </li>
  {% endfor %}
</ul>
{% else %}
<p>No talks have been added yet. Add entries under <code>_talks/</code> to list them.</p>
{% endif %}
